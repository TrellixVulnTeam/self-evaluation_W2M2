{"https://fitbit.com/oauth2/authorize?response_type=code&client_id=22BS6D&scope=activity": "\n\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\">\n    <title>Login transfer</title>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://gcs-assets.fitbit.com/production/app.login.transferLoginState.0.css.dd75d2b055cd2da9b9534e2d7cb26c94.css\" charset=\"utf-8\"/>\n\n    <script src=\"https://accounts.fitbit.com/client.js\"></script>\n\n</head>\n<body>\n    <span id=\"pageLoadingScreen\" class=\"loading\"></span>\n</body>\n\n<script>\n    function postAjax(url, params, success, fail) {\n        ajaxCall('POST', url, params, success, fail)\n    }\n    function ajaxCall(method, url, params, success, fail) {\n        var xhr = new XMLHttpRequest();\n        xhr.open(method, url, true);\n\n        xhr.addEventListener(\"load\", function() {\n            if (xhr.status !== 200) {\n                fail(xhr.responseText);\n            } else {\n                success(xhr.responseText);\n            }\n        });\n        xhr.addEventListener(\"error\", function() {\n            fail();\n        });\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        xhr.send(params);\n        return xhr;\n    }\n</script>\n\n<script>\n    window.onload = function transfer() {\n        if (window.Fitbit) {\n            Fitbit.setLocale(\"en_US\");\n            var host = document.location.protocol + \"//\" + document.location.host;\n            if (document.location.port && host.indexOf(\":\") < 0) {\n                host += \":\" + document.location.port;\n            }\n            var redirectParam = 'https%3A%2F%2Fwww.fitbit.com%2Foauth2%2Fauthorize%3Fclient_id%3D22BS6D%26response_type%3Dcode%26scope%3Dactivity%26state';\n            var redirect = redirectParam !== '' && redirectParam !== 'null' ? redirectParam : host;\n            var transferLocation = host + \"/login/transferpage?redirect=\" + encodeURIComponent(redirect);\n\n            var isSignup = '' === 'true';\n\n            if(isSignup) {\n                Fitbit.fbCreateAccount(true, transferLocation);\n            } else {\n                var logoutURI = host + \"/logout/transferpage\";\n                redirect = decodeURIComponent(redirect);\n                Fitbit.fbIsUserAuthenticated(true, transferLocation).then(function () {\n                    Fitbit.fbGetCurrentAccessToken()\n                        .then(function (stt) {\n                            if (stt) {\n                                var transferRequestURI = host + \"/login/transfer\";\n                                var transferRequestParams = \"stt=\" + stt + \"&csrfToken=1b9cbd945b8c400b9b86fb6c67f5c385\";\n                                postAjax(transferRequestURI, transferRequestParams,\n                                         function () {\n                                             window.location = redirect;\n                                         },\n                                         function () {\n                                             window.location = logoutURI;\n                                         }\n                                );\n                            }\n                        })\n                        .catch(function(){\n                            window.location = logoutURI;\n                        });\n                });\n            }\n        }\n    }\n</script>\n\n</html>"}